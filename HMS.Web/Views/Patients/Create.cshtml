@model HMS.Web.Models.CreatePatientViewModel
@{
    ViewData["Title"] = "Add New Patient";
}

<!-- Page Header -->
<div class="page-header">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <h2><i class="fas fa-user-plus"></i> Add New Patient</h2>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="@Url.Action("Index", "Dashboard")">Dashboard</a></li>
                    <li class="breadcrumb-item"><a href="@Url.Action("Index", "Patients")">Patients</a></li>
                    <li class="breadcrumb-item active">Add New</li>
                </ol>
            </nav>
        </div>
        <div>
            <a href="@Url.Action("Index", "Patients")" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to List
            </a>
        </div>
    </div>
</div>

<!-- Create Patient Form -->
<div class="row">
    <div class="col-12">
        <form asp-action="Create" method="post" id="createPatientForm">
            <div class="stat-card">
                <!-- Personal Information -->
                <h5 class="mb-4">
                    <i class="fas fa-user"></i> Personal Information
                </h5>
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label asp-for="FirstName" class="form-label">First Name <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-user"></i></span>
                            <input asp-for="FirstName" class="form-control" placeholder="Enter first name" />
                        </div>
                        <span asp-validation-for="FirstName" class="text-danger small"></span>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label asp-for="LastName" class="form-label">Last Name <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-user"></i></span>
                            <input asp-for="LastName" class="form-control" placeholder="Enter last name" />
                        </div>
                        <span asp-validation-for="LastName" class="text-danger small"></span>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label asp-for="Email" class="form-label">Email Address <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                            <input asp-for="Email" type="email" class="form-control" placeholder="email@example.com" />
                        </div>
                        <span asp-validation-for="Email" class="text-danger small"></span>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label asp-for="Password" class="form-label">Password <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-lock"></i></span>
                            <input asp-for="Password" type="password" class="form-control" placeholder="Minimum 6 characters" />
                        </div>
                        <span asp-validation-for="Password" class="text-danger small"></span>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label asp-for="PhoneNumber" class="form-label">Phone Number <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-phone"></i></span>
                            <input asp-for="PhoneNumber" class="form-control" placeholder="1234567890" />
                        </div>
                        <span asp-validation-for="PhoneNumber" class="text-danger small"></span>
                    </div>

                    <div class="col-md-4 mb-3">
                        <label asp-for="DateOfBirth" class="form-label">Date of Birth <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-calendar"></i></span>
                            <input asp-for="DateOfBirth" type="date" class="form-control" max="@DateTime.Now.ToString("yyyy-MM-dd")" />
                        </div>
                        <span asp-validation-for="DateOfBirth" class="text-danger small"></span>
                    </div>

                    <div class="col-md-4 mb-3">
                        <label asp-for="Gender" class="form-label">Gender <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-venus-mars"></i></span>
                            <select asp-for="Gender" class="form-control">
                                <option value="">Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <span asp-validation-for="Gender" class="text-danger small"></span>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 mb-3">
                        <label asp-for="Address" class="form-label">Address <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-map-marker-alt"></i></span>
                            <textarea asp-for="Address" class="form-control" rows="2" placeholder="Enter complete address"></textarea>
                        </div>
                        <span asp-validation-for="Address" class="text-danger small"></span>
                    </div>
                </div>
            </div>

            <!-- Medical Information -->
            <div class="stat-card mt-4">
                <h5 class="mb-4">
                    <i class="fas fa-heartbeat"></i> Medical Information
                </h5>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label asp-for="BloodGroup" class="form-label">Blood Group <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-tint"></i></span>
                            <select asp-for="BloodGroup" class="form-control">
                                <option value="">Select Blood Group</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                            </select>
                        </div>
                        <span asp-validation-for="BloodGroup" class="text-danger small"></span>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label asp-for="MedicalHistory" class="form-label">Medical History</label>
                        <textarea asp-for="MedicalHistory" class="form-control" rows="3" placeholder="Previous illnesses, surgeries, etc."></textarea>
                        <span asp-validation-for="MedicalHistory" class="text-danger small"></span>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label asp-for="Allergies" class="form-label">Known Allergies</label>
                        <textarea asp-for="Allergies" class="form-control" rows="3" placeholder="Drug allergies, food allergies, etc."></textarea>
                        <span asp-validation-for="Allergies" class="text-danger small"></span>
                    </div>
                </div>
            </div>

            <!-- Emergency Contact -->
            <div class="stat-card mt-4">
                <h5 class="mb-4">
                    <i class="fas fa-phone-square"></i> Emergency Contact
                </h5>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label asp-for="EmergencyContactName" class="form-label">Contact Name <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-user-friends"></i></span>
                            <input asp-for="EmergencyContactName" class="form-control" placeholder="Emergency contact person" />
                        </div>
                        <span asp-validation-for="EmergencyContactName" class="text-danger small"></span>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label asp-for="EmergencyContactPhone" class="form-label">Contact Phone <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-phone-alt"></i></span>
                            <input asp-for="EmergencyContactPhone" class="form-control" placeholder="Emergency phone number" />
                        </div>
                        <span asp-validation-for="EmergencyContactPhone" class="text-danger small"></span>
                    </div>
                </div>
            </div>

            <!-- Insurance Information -->
            <div class="stat-card mt-4">
                <h5 class="mb-4">
                    <i class="fas fa-shield-alt"></i> Insurance Information (Optional)
                </h5>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label asp-for="InsuranceProvider" class="form-label">Insurance Provider</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-building"></i></span>
                            <input asp-for="InsuranceProvider" class="form-control" placeholder="Insurance company name" />
                        </div>
                        <span asp-validation-for="InsuranceProvider" class="text-danger small"></span>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label asp-for="InsuranceNumber" class="form-label">Insurance Number</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-id-card"></i></span>
                            <input asp-for="InsuranceNumber" class="form-control" placeholder="Policy/Insurance number" />
                        </div>
                        <span asp-validation-for="InsuranceNumber" class="text-danger small"></span>
                    </div>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="stat-card mt-4">
                <div class="d-flex justify-content-between">
                    <a href="@Url.Action("Index", "Patients")" class="btn btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </a>
                    <button type="submit" class="btn btn-primary" id="submitBtn">
                        <i class="fas fa-save"></i> Create Patient
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<style>
    .form-label {
        font-weight: 600;
        font-size: 14px;
        color: #2c3e50;
        margin-bottom: 8px;
    }

    .input-group-text {
        background: white;
        border-right: none;
        color: #667eea;
    }

    .input-group .form-control,
    .input-group .form-select {
        border-left: none;
    }

    .input-group:focus-within .input-group-text {
        border-color: #667eea;
    }

    textarea.form-control {
        resize: vertical;
    }

    .btn-primary {
        padding: 12px 30px;
    }

    .btn-secondary {
        padding: 12px 30px;
    }
</style>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    
    <script>
        document.getElementById('createPatientForm').addEventListener('submit', function(e) {
            const btn = document.getElementById('submitBtn');
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating...';
        });
    </script>
}